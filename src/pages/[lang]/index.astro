---
import Layout from '@/layouts/Layout.astro'
import Hero from '@/components/Hero'
import Problem from '@/components/Problem'
import Experience from '@/components/Experience'
import TerminalSkills from '@/components/TerminalSkills'
import Projects from '@/components/Projects'
import Contact from '@/components/Contact'
import HireCTA from '@/components/HireCTA'

import { getBasics } from '@/data/cv'
import { languages } from '@/data/i18n'
import type { Lang } from '@/data/i18n'

export function getStaticPaths() {
  return languages.map(lang => ({ params: { lang } }))
}

const { lang } = Astro.params as { lang: Lang }
const basics = getBasics(lang)
---

<Layout
  title={basics.name}
  description={basics.summary}
  lang={lang}
>
  <!-- Hero: Tension + Promise -->
  <Hero
    client:load
    name={basics.name}
    lang={lang}
    linkedIn={basics.profiles.find(p => p.network === 'LinkedIn')?.url || ''}
    github={basics.profiles.find(p => p.network === 'GitHub')?.url || ''}
  />

  <!-- Problem: Empathy -->
  <Problem
    client:visible
    lang={lang}
  />

  <!-- Experience: Proof -->
  <Experience
    client:visible
    lang={lang}
  />

  <!-- Skills: Method -->
  <TerminalSkills
    client:visible
    lang={lang}
  />

  <!-- Projects: Work -->
  <Projects
    client:visible
    lang={lang}
  />

  <!-- Hire CTA -->
  <HireCTA
    client:visible
    lang={lang}
  />

  <!-- Contact: CTA -->
  <Contact
    client:visible
    lang={lang}
  />
</Layout>
